============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0
rootdir: /app
configfile: pyproject.toml
testpaths: tests
plugins: cov-7.0.0, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 868 items

tests/test_architecture.py .                                             [  0%]
tests/test_async_utils.py ......                                         [  0%]
tests/test_audit_complex.py ......                                       [  1%]
tests/test_audit_integrity.py ....                                       [  1%]
tests/test_audit_security.py ..                                          [  2%]
tests/test_builder.py .........                                          [  3%]
tests/test_builder_manifest.py ...........                               [  4%]
tests/test_canonical_hashing.py .....                                    [  5%]
tests/test_cap.py .............                                          [  6%]
tests/test_cap_complex.py .......                                        [  7%]
tests/test_cap_errors.py .....                                           [  7%]
tests/test_cap_security.py .......                                       [  8%]
tests/test_capabilities.py ....                                          [  9%]
tests/test_capabilities_extended.py ....                                 [  9%]
tests/test_cli_init.py .....                                             [ 10%]
tests/test_cli_interop.py .........                                      [ 11%]
tests/test_cli_interop_extended.py ......                                [ 11%]
tests/test_cli_recipe.py .                                               [ 12%]
tests/test_cli_security.py .                                             [ 12%]
tests/test_cli_validate.py ................                              [ 14%]
tests/test_common.py .                                                   [ 14%]
tests/test_compliance_schema.py ...........                              [ 15%]
tests/test_conversation_complex.py ......                                [ 16%]
tests/test_conversation_models.py ....                                   [ 16%]
tests/test_diff_coverage.py ...                                          [ 16%]
tests/test_docs_examples.py .....                                        [ 17%]
tests/test_docs_generator.py ...........                                 [ 18%]
tests/test_docs_updated.py ........                                      [ 19%]
tests/test_evaluation_metadata.py ..........                             [ 20%]
tests/test_evaluator_node.py ....                                        [ 21%]
tests/test_evaluator_node_complex.py ......                              [ 22%]
tests/test_finops_resources.py ....                                      [ 22%]
tests/test_foundation.py ..                                              [ 22%]
tests/test_frontend_integration.py ..                                    [ 22%]
tests/test_governance_spec.py ....                                       [ 23%]
tests/test_graph_events.py ..                                            [ 23%]
tests/test_identity.py ..............                                    [ 25%]
tests/test_interfaces_session.py .....                                   [ 25%]
tests/test_interop_coverage.py ..                                        [ 26%]
tests/test_interoperability.py ....                                      [ 26%]
tests/test_langchain_adapter.py ...                                      [ 26%]
tests/test_lifecycle.py .....                                            [ 27%]
tests/test_lifecycle_extended.py .......                                 [ 28%]
tests/test_lineage.py ............                                       [ 29%]
tests/test_lineage_security.py ....                                      [ 30%]
tests/test_logger_creation.py ..                                         [ 30%]
tests/test_manifest_integrity.py ......                                  [ 30%]
tests/test_mcp_adapter.py .....                                          [ 31%]
tests/test_memory_governance.py .......                                  [ 32%]
tests/test_metadata_provenance.py ......                                 [ 33%]
tests/test_middleware_complex.py ....                                    [ 33%]
tests/test_middleware_interface.py .....                                 [ 34%]
tests/test_mock_factory.py ................................              [ 37%]
tests/test_observability.py ...............                              [ 39%]
tests/test_observability_security.py .......                             [ 40%]
tests/test_openai_adapter.py ...                                         [ 40%]
tests/test_packs.py .........                                            [ 41%]
tests/test_presentation_complex.py ..                                    [ 41%]
tests/test_presentation_edge_cases.py ......                             [ 42%]
tests/test_presentation_parsing.py .                                     [ 42%]
tests/test_presentation_schemas.py ...........                           [ 44%]
tests/test_public_api.py .                                               [ 44%]
tests/test_secure_loader.py ...                                          [ 44%]
tests/test_secure_loader_edge_cases.py ....                              [ 44%]
tests/test_security_exploit.py ...                                       [ 45%]
tests/test_security_fixes.py ...                                         [ 45%]
tests/test_semantic_diff.py ...........                                  [ 46%]
tests/test_semantic_diff_extended.py ..........                          [ 48%]
tests/test_semantic_errors.py .....                                      [ 48%]
tests/test_service_contract.py .......                                   [ 49%]
tests/test_session_management.py ..........                              [ 50%]
tests/test_simulation_schemas.py .........                               [ 51%]
tests/test_stream_lifecycle.py ........                                  [ 52%]
tests/test_streaming_contracts.py ....                                   [ 52%]
tests/test_streaming_contracts_edge_cases.py .....                       [ 53%]
tests/test_transport_complex.py ....                                     [ 54%]
tests/test_transport_edge_cases.py ......                                [ 54%]
tests/test_transport_request.py ....                                     [ 55%]
tests/test_v2_agent_complex.py .                                         [ 55%]
tests/test_v2_agent_def.py ...                                           [ 55%]
tests/test_v2_complex_scenarios.py ..........                            [ 56%]
tests/test_v2_composition.py .........                                   [ 57%]
tests/test_v2_constraints.py .....                                       [ 58%]
tests/test_v2_constraints_complex.py ....                                [ 58%]
tests/test_v2_constraints_edge_cases.py ....                             [ 59%]
tests/test_v2_construct.py .....                                         [ 59%]
tests/test_v2_construct_extended.py ........                             [ 60%]
tests/test_v2_cortex_complex.py ..                                       [ 61%]
tests/test_v2_cortex_edge_cases.py ........                              [ 61%]
tests/test_v2_cortex_harvest.py ...                                      [ 62%]
tests/test_v2_council_harvest.py ....                                    [ 62%]
tests/test_v2_coverage.py .........                                      [ 63%]
tests/test_v2_draft_workflow.py .......                                  [ 64%]
tests/test_v2_edge_cases.py ........                                     [ 65%]
tests/test_v2_episteme_harvest.py .........                              [ 66%]
tests/test_v2_exports.py ..                                              [ 66%]
tests/test_v2_flow_governance.py .....                                   [ 67%]
tests/test_v2_flow_governance_complex.py .......                         [ 68%]
tests/test_v2_flow_governance_edge_cases.py .........                    [ 69%]
tests/test_v2_gateway_qos.py .........                                   [ 70%]
tests/test_v2_gateway_qos_extended.py ......                             [ 70%]
tests/test_v2_generative_node.py ..............                          [ 72%]
tests/test_v2_generative_node_extended.py ......                         [ 73%]
tests/test_v2_governance_protocol.py ..                                  [ 73%]
tests/test_v2_governance_text_injection.py ......                        [ 74%]
tests/test_v2_harvesting_support.py .........                            [ 75%]
tests/test_v2_identity_requirement.py ................                   [ 77%]
tests/test_v2_inline_tools.py ......                                     [ 77%]
tests/test_v2_inline_tools_extended.py ....                              [ 78%]
tests/test_v2_interaction_and_fork.py ....                               [ 78%]
tests/test_v2_interaction_edge_cases.py .........                        [ 79%]
tests/test_v2_knowledge.py ..........                                    [ 80%]
tests/test_v2_manifest.py ...                                            [ 81%]
tests/test_v2_model_routing.py .....                                     [ 81%]
tests/test_v2_model_routing_complex.py ....                              [ 82%]
tests/test_v2_model_routing_edge_cases.py ......                         [ 82%]
tests/test_v2_phase3.py ...                                              [ 83%]
tests/test_v2_recipe.py ............                                     [ 84%]
tests/test_v2_recipe_draft.py ............                               [ 86%]
tests/test_v2_recipe_extensions.py ......                                [ 86%]
tests/test_v2_resources.py ...                                           [ 87%]
tests/test_v2_resources_extended.py ..........                           [ 88%]
tests/test_v2_semantic_ref.py ......                                     [ 88%]
tests/test_v2_semantic_ref_complex.py ......                             [ 89%]
tests/test_v2_skills.py ...........                                      [ 90%]
tests/test_v2_spec.py .........                                          [ 91%]
tests/test_v2_standalone.py ...                                          [ 92%]
tests/test_v2_strictness.py .........                                    [ 93%]
tests/test_v2_veritas_harvest.py ........                                [ 94%]
tests/test_v2_visualization_collab.py ......                             [ 94%]
tests/test_validation_governance.py .....                                [ 95%]
tests/test_validation_governance_complex.py ..                           [ 95%]
tests/test_validation_governance_edge_cases.py ......                    [ 96%]
tests/test_validation_governance_extended.py ....                        [ 96%]
tests/test_version.py .                                                  [ 97%]
tests/test_viz_mermaid.py ...............                                [ 98%]
tests/test_viz_recipe.py ...........                                     [100%]

================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                                                    Stmts   Miss  Cover   Missing
-------------------------------------------------------------------------------------
src/coreason_manifest/__init__.py                          40      0   100%
src/coreason_manifest/builder.py                          113      0   100%
src/coreason_manifest/cli.py                              115      0   100%
src/coreason_manifest/spec/cap.py                          59      0   100%
src/coreason_manifest/spec/common/capabilities.py          14      0   100%
src/coreason_manifest/spec/common/error.py                  7      0   100%
src/coreason_manifest/spec/common/graph_events.py          44      0   100%
src/coreason_manifest/spec/common/identity.py              12      0   100%
src/coreason_manifest/spec/common/interoperability.py      13      0   100%
src/coreason_manifest/spec/common/memory.py                15      0   100%
src/coreason_manifest/spec/common/message.py               16      0   100%
src/coreason_manifest/spec/common/observability.py         54      0   100%
src/coreason_manifest/spec/common/presentation.py          75      0   100%
src/coreason_manifest/spec/common/request.py               31      0   100%
src/coreason_manifest/spec/common/session.py               37      0   100%
src/coreason_manifest/spec/common/stream.py                10      0   100%
src/coreason_manifest/spec/common_base.py                  20      0   100%
src/coreason_manifest/spec/governance.py                   20      0   100%
src/coreason_manifest/spec/interfaces/__init__.py           0      0   100%
src/coreason_manifest/spec/interfaces/middleware.py        17      0   100%
src/coreason_manifest/spec/interfaces/session.py           13      0   100%
src/coreason_manifest/spec/interfaces/stream.py             3      0   100%
src/coreason_manifest/spec/schemas/__init__.py              0      0   100%
src/coreason_manifest/spec/simulation.py                   55      0   100%
src/coreason_manifest/spec/v2/__init__.py                   2      0   100%
src/coreason_manifest/spec/v2/agent.py                     26      0   100%
src/coreason_manifest/spec/v2/compliance.py                38      0   100%
src/coreason_manifest/spec/v2/contracts.py                 17      0   100%
src/coreason_manifest/spec/v2/definitions.py              182      0   100%
src/coreason_manifest/spec/v2/evaluation.py                14      0   100%
src/coreason_manifest/spec/v2/guardrails.py                23      0   100%
src/coreason_manifest/spec/v2/identity.py                  25      0   100%
src/coreason_manifest/spec/v2/knowledge.py                 30      0   100%
src/coreason_manifest/spec/v2/packs.py                     40      0   100%
src/coreason_manifest/spec/v2/provenance.py                19      0   100%
src/coreason_manifest/spec/v2/reasoning.py                 29      0   100%
src/coreason_manifest/spec/v2/recipe.py                   322      0   100%
src/coreason_manifest/spec/v2/resources.py                 72      0   100%
src/coreason_manifest/spec/v2/skills.py                    37      0   100%
src/coreason_manifest/utils/__init__.py                     0      0   100%
src/coreason_manifest/utils/audit.py                       44      0   100%
src/coreason_manifest/utils/base_adapter.py                17      0   100%
src/coreason_manifest/utils/diff.py                       130      0   100%
src/coreason_manifest/utils/docs.py                        89      0   100%
src/coreason_manifest/utils/langchain_adapter.py            7      0   100%
src/coreason_manifest/utils/loader.py                      49      0   100%
src/coreason_manifest/utils/logger.py                       5      0   100%
src/coreason_manifest/utils/mcp_adapter.py                  9      0   100%
src/coreason_manifest/utils/mock.py                       172      0   100%
src/coreason_manifest/utils/openai_adapter.py               7      0   100%
src/coreason_manifest/utils/service.py                      6      0   100%
src/coreason_manifest/utils/v2/governance.py               50      0   100%
src/coreason_manifest/utils/v2/io.py                       48      0   100%
src/coreason_manifest/utils/v2/resolver.py                 14      0   100%
src/coreason_manifest/utils/viz.py                        117      0   100%
-------------------------------------------------------------------------------------
TOTAL                                                    2423      0   100%
Required test coverage of 100% reached. Total coverage: 100.00%
============================= 868 passed in 5.49s ==============================
